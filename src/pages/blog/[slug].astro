---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";

interface Props {
    post: CollectionEntry<"blog">;
}

export async function getStaticPaths() {
    const blogPosts = await getCollection("blog");
    return blogPosts.map((post) => ({
        params: { slug: post.slug },
        props: { post },
    }));
}
const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title="test-post">
    <div class="max-w-[1000px] mx-auto md:px-4 md:py-8">
        <article
            class="w-full flex flex-col justify-start items-start space-y-4"
        >
            <Image
                src={post.data.cover}
                alt={post.data.title}
                class="object-cover object-center w-full !m-0 aspect-video block"
                width={600}
                height={600}
            />
            <h1 class="text-3xl text-slate-900 font-semibold">
                {post.data.title}
            </h1>
            <p class="text-lg text-slate-600">{post.data.excerpt}</p>
            <section class="flex gap-x-3 justify-start items-center">
                {
                    post.data.tags.map((tag) => (
                        <span class="text-sm text-slate-900 bg-slate-100 px-4 py-0.5 rounded-full border border-slate-300/35">
                            {tag}
                        </span>
                    ))
                }
            </section>
            <div>
                <Content />
            </div>
        </article>
    </div>
</Layout>

<style is:global>
    @import url("https://fonts.googleapis.com/css2?family=Zain:wght@400;500;600;700&display=swap");
    body {
        direction: rtl;
        text-align: right;
        background-color: #f9fafb;
        font-family: "Zain", sans-serif;
    }
</style>
